<script>
    var socket = io();
    
    socket.emit('gotInGame');

    $('input').click(function(){
      if( $(this).attr("src") == "tictac/empty.png"){
        socket.emit('FieldClicked', $(this).attr("id")  );
      }
    });
    
    $('form').submit(function(){
      socket.emit('chat message', $('#chatMsg').val());
      $('#chatMsg').val('');
      return false;
    });

    $('#surr').click(function(){
      socket.emit('surrender',null )
    })

    socket.on('change', function(msg){
      if(msg[1]==0){
        $("#"+msg[0]).attr("src","tictac/tic.png");
        $("#p1").attr('style','text-decoration:none; width:90%; overflow:auto; text-overflow:ellpsis')
        $("#p2").attr('style','text-decoration:underline; width:90%; overflow:auto; text-overflow:ellpsis')
      }
      else{
        $("#"+msg[0]).attr("src","tictac/tac.png");
        $("#p2").attr('style','text-decoration:none; width:90%; overflow:auto; text-overflow:ellpsis')
        $("#p1").attr('style','text-decoration:underline; width:90%; overflow:auto; text-overflow:ellpsis')
      }
    });
  
    socket.on('clear', function(msg){
      $("#"+msg).attr("src","tictac/empty.png");
    });

    socket.on('chat message', function(msg){
      $('#chat').append(msg);
      $('#chat').scrollTop($('#chat').prop("scrollHeight"));
    });

    socket.on('user_connected', function(msg){
      $("#"+msg.id).text(msg.name);
    })

    socket.on('won', function(msg){
      // tu delete nie ma szans zadziałać, bo ten wskaźnik się odnosi do czegoś na serwerze,tu nie ma i to w ogóle psuje, bo tu nie mamy dostępu do sesji
      

      // alert jest przeglądarkowy i nic się z nim nie zrobi jeśli chodzi o wygląd, trzeba by inaczej
      alert(msg + " wygrał!");
      window.location = "/rooms/room/game/leave";
    });

    socket.on('draw', function(msg){
      alert("remis");
      window.location = "/rooms/room/game/leave";
    });

  </script>